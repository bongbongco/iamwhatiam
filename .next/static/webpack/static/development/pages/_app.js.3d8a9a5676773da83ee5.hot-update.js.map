{"version":3,"file":"static/webpack/static/development/pages/_app.js.3d8a9a5676773da83ee5.hot-update.js","sources":["webpack:///./resolvers.js"],"sourcesContent":["import { gql } from \"apollo-boost\";\nimport { PRODUCT_FRAGMENT } from \"./fragments\";\n\nexport const defaults = {\n    cart: [\n    ]\n};\nexport const resolvers = {\n    Mutation: {\n        toggleProduct: (_, variables, { cache, getCacheKey }) => {\n            const id = getCacheKey({ __typename: \"Product\", id: variables.id });\n            const fragment = gql`\n                ${PRODUCT_FRAGMENT} \n            `;\n            const product = cache.readFragment({fragment: fragment, id});\n            const cartQuery = gql`\n            {\n                cart @client {\n                    id\n                }\n            }\n            `;\n            const { cart } = cache.readQuery(\n                {query: cartQuery}\n            );\n            let newCart;\n            let onCart;\n            const foundProduct = cart.find(\n                aProduct => aProduct.id === product.id\n            );\n            if(foundProduct){\n                const cleanCart = cart.filter(aProduct => aProduct.id !== product.id);\n                newCart = cleanCart;\n                onCart = false;\n            } else {\n                newCart = [...cart, product]\n                onCart = true;\n            }\n            cache.writeData({\n                data: {\n                    cart: newCart\n                }\n            });\n            return null;\n        }\n    },\n    Product: {\n        onCart: () => false\n    }\n};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AADA;AAIA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AACA;AAPA;AAcA;AAAA;AAdA;AACA;AAeA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AADA;AAKA;AACA;AApCA;AAsCA;AACA;AAAA;AAAA;AADA;AAvCA;;;;A","sourceRoot":""}